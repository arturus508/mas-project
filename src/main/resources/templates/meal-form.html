<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="~{fragments/head :: head('Meal')}"></head>
<body class="bg-light">

<nav th:replace="~{fragments/nav :: nav}"></nav>

<div class="container py-4">
  <h3 class="mb-3">Meal</h3>

  <form  method="post"  th:action="${action != null} ? ${action} : @{/meals/save}"  th:object="${meal}"  class="row g-3">
    <input  type="hidden"  th:name="${_csrf.parameterName}"  th:value="${_csrf.token}">

    <div class="col-12 col-md-6">
      <label class="form-label">Date</label>
      <input  type="date"  class="form-control"  th:field="*{date}"  required>
      <div class="form-text">Day this meal was eaten.</div>
    </div>

    <div class="col-12 col-md-6">
      <label class="form-label">Meal type</label>
      <select  class="form-select"  th:field="*{mealType}"  required>
        <option th:value="BREAKFAST">BREAKFAST</option>
        <option th:value="LUNCH">LUNCH</option>
        <option th:value="DINNER">DINNER</option>
        <option th:value="SNACK">SNACK</option>
      </select>
      <div class="form-text">Pick breakfast, lunch, dinner, or snack.</div>
    </div>

    <div class="col-12">
      <div class="form-text">Optional quick  macros  override  (use when you do not add items)</div>
    </div>

    <div class="col-6 col-md-3">
      <label class="form-label">kcal</label>
      <input  type="number"  min="0"  class="form-control"  th:field="*{kcalManual}" placeholder="e.g., 650">
    </div>
    <div class="col-6 col-md-3">
      <label class="form-label">protein</label>
      <input  type="number"  min="0"  class="form-control"  th:field="*{proteinManual}" placeholder="e.g., 35">
    </div>
    <div class="col-6 col-md-3">
      <label class="form-label">fat</label>
      <input  type="number"  min="0"  class="form-control"  th:field="*{fatManual}" placeholder="e.g., 20">
    </div>
    <div class="col-6 col-md-3">
      <label class="form-label">carbs</label>
      <input  type="number"  min="0"  class="form-control"  th:field="*{carbsManual}" placeholder="e.g., 70">
    </div>

    <div class="col-12 d-flex gap-2">
      <button class="btn btn-success">Save</button>
      <a href="/meals/today" class="btn btn-outline-secondary">Back to Meals Today</a>
      <a href="/meal-plans" class="btn btn-outline-secondary">Back to Meal Library</a>
    </div>
  </form>

  <div class="mt-4">
    <div class="text-muted small">
      To add foods with quantities and auto macros, use the Day view:
      <a href="/meals/today">/meals/today</a>
    </div>
  </div>
</div>
</body>
</html>




