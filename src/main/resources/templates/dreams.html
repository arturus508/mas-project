<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Dream journal</title>
  <link  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"  rel="stylesheet">
</head>
<body class="bg-light">

<div class="container  py-4">
  <div class="d-flex  align-items-center  justify-content-between  mb-3">
    <h2 class="m-0">Dream journal</h2>
    <form class="d-flex  gap-2"   method="get"  action="/mind/dreams">
      <input type="date" class="form-control" name="from" th:value="${from}">
      <input type="date" class="form-control" name="to"   th:value="${to}">
      <input type="text" class="form-control" name="tag"  placeholder="tag" th:value="${tag}">
      <button class="btn btn-outline-primary">Search</button>
    </form>
  </div>

  <div class="row  g-3">
    <div class="col-12 col-lg-7">
      <div class="card">
        <div class="card-header">Entries</div>
        <ul class="list-group  list-group-flush">
          <li class="list-group-item" th:each="d : ${dreams}">
            <div class="d-flex  justify-content-between  align-items-center">
              <div>
                <div class="fw-semibold" th:text="${d.title}">Title</div>
                <div class="text-muted  small">
                  <span th:text="${d.date}">2025-08-03</span>
                  <span th:if="${d.tags}"> 路 <span th:text="${d.tags}">tag1, tag2</span></span>
                  <span th:if="${d.mood}"> 路 mood <span th:text="${d.mood}">3</span></span>
                  <span th:if="${d.lucid}"> 路 lucid</span>
                  <span th:if="${d.nightmare}"> 路 nightmare</span>
                </div>
              </div>
            </div>
            <div class="mt-2  small" th:text="${d.content}">...</div>
          </li>
          <li class="list-group-item text-muted text-center" th:if="${#lists.isEmpty(dreams)}">No dreams yet</li>
        </ul>
      </div>
    </div>

    <div class="col-12 col-lg-5">
      <div class="card">
        <div class="card-header">Add dream</div>
        <div class="card-body">
          <form  method="post"  action="/mind/dreams/add">
            <div class="mb-2">
              <label class="form-label">Title</label>
              <input class="form-control"  name="title"  required>
            </div>
            <div class="mb-2">
              <label class="form-label">Content</label>
              <textarea class="form-control" rows="5" name="content" required></textarea>
            </div>
            <div class="mb-2">
              <label class="form-label">Tags  (comma separated)</label>
              <input class="form-control" name="tags">
            </div>
            <div class="mb-2">
              <label class="form-label">Mood  (1..5)</label>
              <input type="number" min="1" max="5" class="form-control" name="mood">
            </div>
            <div class="mb-2">
              <label class="form-label">Link to sleep entry  (optional id)</label>
              <input type="number" class="form-control" name="sleepEntryId">
            </div>
            <div class="mb-3">
              <label class="form-label">Date  (optional)</label>
              <input type="date" class="form-control" name="date">
            </div>
            <div class="form-check  form-switch  mb-2">
              <input class="form-check-input" type="checkbox" name="lucid" id="lucid">
              <label class="form-check-label" for="lucid">Lucid</label>
            </div>
            <div class="form-check  form-switch  mb-3">
              <input class="form-check-input" type="checkbox" name="nightmare" id="nightmare">
              <label class="form-check-label" for="nightmare">Nightmare</label>
            </div>
            <button class="btn btn-success">Save</button>
          </form>
        </div>
      </div>
    </div>

  </div>
  <div class="mt-3">
    <a href="/mind/sleep" class="btn btn-outline-secondary">Back to Sleep</a>
  </div>
</div>

</body>
</html>
