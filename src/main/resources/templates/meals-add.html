<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head('Add meal')}"></head>
<body class="bg-light">
<div th:replace="~{fragments/nav :: body}"></div>

<div class="container py-4" style="max-width: 720px;">
  <h2 class="mb-3">Add meal</h2>

  <form th:action="@{/meals/add}" method="post" class="card p-3">
    <div th:replace="~{fragments/csrf :: csrf}"></div>

    <input type="hidden" name="mealPlanId" th:value="${mealPlanId}">

    <div class="row g-3">
      <div class="col-6">
        <label class="form-label">Date</label>
        <input class="form-control" type="date" name="date" th:value="${date}">
      </div>
      <div class="col-6">
        <label class="form-label">Type</label>
        <select class="form-select" name="type" th:if="${type == null}">
          <option th:each="t : ${types}" th:value="${t}" th:text="${t}">BREAKFAST</option>
        </select>
        <input th:if="${type != null}" type="hidden" name="type" th:value="${type}">
        <div th:if="${type != null}" class="form-control" th:text="${type}"></div>
      </div>

      <div class="col-6">
        <label class="form-label">Kcal</label>
        <input class="form-control" type="number" name="kcal" min="0" step="1">
      </div>
      <div class="col-6 d-flex align-items-end">
        <div class="text-muted small">Leave empty to compute from macros.</div>
      </div>

      <div class="col-4">
        <label class="form-label">Protein (g)</label>
        <input class="form-control" type="number" name="protein" min="0" step="1">
      </div>
      <div class="col-4">
        <label class="form-label">Fat (g)</label>
        <input class="form-control" type="number" name="fat" min="0" step="1">
      </div>
      <div class="col-4">
        <label class="form-label">Carbs (g)</label>
        <input class="form-control" type="number" name="carbs" min="0" step="1">
      </div>
    </div>

    <div class="mt-3 d-flex gap-2">
      <button class="btn btn-primary" type="submit">Save</button>
      <a th:href="@{/meal-plans}" class="btn btn-outline-secondary">Cancel</a>
    </div>
  </form>
</div>
</body>
</html>
